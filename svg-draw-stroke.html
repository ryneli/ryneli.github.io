<!DOCTYPE html>
<html>

<body>

<div style="left:100px; top:100px; position:absolute">
    <svg id="canvas" height="500" width="500" style="background-color:aliceblue">
        <circle cx="100" cy="100" r="50" fill="red"></circle>
    Sorry, your browser does not support inline SVG.  
    </svg> 
</div>
 
<script>
    let canvas = document.getElementById("canvas");
    let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    let d = '';

    function initPath() {
        path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('stroke', 'black');
        path.setAttribute('fill', 'none');
        path.setAttribute('stroke-width', '3');
        d = '';
    }

    function startStroke(x, y) {
        initPath()
        d = `M ${x} ${y}`;
        canvas.append(path);
    }

    function updateStroke(x, y) {
        if (d.startsWith('M')) {
            d = `${d} L ${x} ${y}`;
            path.setAttribute('d', `${d}`);
        }
    }

    function endStroke(x, y) {
        initPath();
    }
    
    canvas.addEventListener("mousedown", (e) => {
        startStroke(e.offsetX, e.offsetY);
        e.preventDefault();
    });
    canvas.addEventListener("mousemove", (e) => {
        updateStroke(e.offsetX, e.offsetY);
        e.preventDefault();
    });
    canvas.addEventListener("mouseup", (e) => {
        endStroke(e.offsetX, e.offsetY);
        e.preventDefault();
    });
    canvas.addEventListener("touchstart", (e) => {
        const rect = e.srcElement.getBoundingClientRect();
        const touch = e.touches[0];
        console.log('touchstart %o', e);
        startStroke(e.layerX, e.layerY);
        e.preventDefault();
    });
    canvas.addEventListener("touchmove", (e) => {
        const rect = e.srcElement.getBoundingClientRect();
        updateStroke(e.layerX, e.layerY);
        e.preventDefault();
    });
    canvas.addEventListener("touchend", (e) => {
        const rect = e.srcElement.getBoundingClientRect();
        endStroke(e.layerX, e.layerY);
        e.preventDefault();
    });
    canvas.addEventListener("pointerdown", (e) => {
        startStroke(e.offsetX, e.offsetY);
        e.preventDefault();
    });
    canvas.addEventListener("pointermove", (e) => {
        updateStroke(e.offsetX, e.offsetY);
        e.preventDefault();
    });
    canvas.addEventListener("pointerup", (e) => {
        endStroke(e.offsetX, e.offsetY);
        e.preventDefault();
    });
</script>
</body>
</html>